<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CURD in node</title>
  <style>
        .vertical-center {
    display: flex;
    flex-direction: row;
    align-items: center;
 
 }
  </style>

  <%- include('partials/head') %>

</head>

<body>
  <%- include('partials/header.ejs') %>

    <% if(msg !=='' ){ %>
      <div class="alert alert-warning alert-dismissible fade show" role="alert">
        <strong>
          <%= msg %>
        </strong>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>

      <% } else{ %>
        <% } %>
          <div class="raw">
            <div class="center">
              <h1 class="vertical-center">fill a form </h1>
              <form class="w-25 p-3" method="post" action="/" enctype="multipart/form-data">
                <div class="form-group">
                  <label for="exampleInputEmail1">Title</label>
                  <input type="text" class="form-control" name="title" id="exampleInputEmail1"
                    aria-describedby="emailHelp" placeholder="Enter Title" required>
                </div>
                <div class="form-group">
                  <label for="exampleInputPassword1">Description</label>
                  <input type="text" class="form-control" name="desc" id="exampleInputPassword1"
                    placeholder="Enter Description" required>
                </div>
                <div class="form-group">
                  <label for="exampleInputEmail1">image</label>
                  <input type="file" class="form-control" name="image"  accept="image/*" id="exampleInputEmail1"
                  required>
                </div>
                <div class="form-group my-4"> <button type="submit" class="btn btn-primary">Submit</button></div>
              </form>
            </div>
            <% if(todo.length !==0){ %>
              <div class="container table-responsive py-5"> 
                          <table class="table table-bordered table-hover">
                            <tr>
                               
            
                              <th scope="col">No</th>
                              <th scope="col" >image</th>
                              <th scope="col">Title</th>
                              <th scope="col">desc</th>
                              <th scope="col">DELETE </th>
                              <th scope="col">EDIT</th>
                            </tr>
                            <% for(var i=0; i<todo.length; i++) {%>
                              <tbody>
                                <td>
                                  <%= [i+1] %>
                                </td>
                                <td>
                                  <% if(todo[i].image){ %>
                                  <img src="images/<%= todo[i].image %>" alt="image" width="50px">
                                  <% } %>
                                </td>
                                <td> <a href="/show/<%= todo[i]._id %>">
                                    <%= todo[i].title %>
                                  </a></td>
                                <td>
                                  <%= todo[i].desc %>
                                </td>
                                <form method="GET" action="/delete/<%= todo[i]._id %>">
                                  <th> <input type="submit" onclick="return confirm('Are you sure you want to delete this item')"
                                      value="Delete <%= [i+1] %> "></th>
                                </form>
                                <form method="GET" action="/edit/<%= todo[i]._id %>">
                                  <th> <input type="submit" value="edit <%= [i+1] %> "></th>
                                </form>
                              </tbody>
                              <% } %>
                          </table>
                          <% } else{ %>
                            <h1>no data found</h1>
                            <% } %>
                      </div>
            </div>
</body>
<%- include('partials/footer') %>

</html>